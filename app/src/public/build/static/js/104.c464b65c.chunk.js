"use strict";(self.webpackChunklight=self.webpackChunklight||[]).push([[104],{104:function(e,n,t){t.r(n),t.d(n,{default:function(){return m}});var a=t(439),s=t(165),r=t(861),c=t(791),i=t(689),u=t(184);var l=function(){var e=(0,c.useState)(0),n=(0,a.Z)(e,2),t=n[0],l=n[1],o=(0,c.useState)(1),f=(0,a.Z)(o,2),m=f[0],d=f[1],h=(0,c.useState)(!0),x=(0,a.Z)(h,2),p=x[0],v=x[1],g=(0,c.useRef)(null),j=(0,c.useRef)(null),b=(0,c.useState)(""),N=(0,a.Z)(b,2),k=N[0],T=N[1],C=(0,c.useState)([{IMG_DATA:"",PRODUCT_PK:"",PRODUCT_NM:""},{IMG_DATA:"",PRODUCT_PK:"",PRODUCT_NM:""},{IMG_DATA:"",PRODUCT_PK:"",PRODUCT_NM:""}]),Z=(0,a.Z)(C,2),P=Z[0],S=Z[1],A=(0,c.useState)(""),D=(0,a.Z)(A,2),_=D[0],y=D[1];(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/main",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify()});case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:(t=e.sent).success?S(t.data):alert(t.msg),e.next=12;break;case 11:throw Error("\uc11c\ubc84 \uc751\ub2f5 \uc2e4\ud328");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(Error("\ubd88\ub7ec\uc624\ub294 \uc911 \uc5d0\ub7ec \ubc1c\uc0dd"));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,c.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===P[0].IMG_DATA){e.next=5;break}return e.next=3,Promise.all(P.map((function(e){return e="data:image/jpeg;base64,".concat(e.IMG_DATA)})));case 3:n=e.sent,y(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[P]);var E=function(e){var n=e.target.className;l("banner-pre"===n?function(e){return e+1}:function(e){return e-1}),1===t?"banner-pre"===n&&setTimeout((function(){l(-1),T("move")}),300):1!==t&&T(""),-1===t?"banner-next"===n&&setTimeout((function(){l(1),T("move")}),300):-1!==t&&T("")},M=function(e){var n=0;"0"===e.target.id?n=1:"1"===e.target.id?n=0:"2"===e.target.id&&(n=-1),l(n),T("")};(0,c.useEffect)((function(){if(""!==_){var e=j.current.clientWidth+10;!function(e){var n=0;0===e?n=1:1===e?n=0:-1!==e&&2!==e||(n=2),d(n)}(t),g.current.style.transform="translateX("+t*e+"px)"}}),[t,_]),(0,c.useEffect)((function(){var e=setInterval((function(){l((function(e){return e===P.length-2&&setTimeout((function(){T("move"),l(-1)}),300),T(""),e+1}))}),3e3);return!1===p&&clearInterval(e),function(){clearInterval(e)}}),[P.length,p]);var O=function(){v((function(e){return!1===e}))},R=(0,i.s0)();return(0,u.jsxs)("div",{className:"banner",children:[(0,u.jsxs)("div",{className:"banner-header",onMouseEnter:O,onMouseLeave:O,children:[" ",(0,u.jsxs)("div",{className:"banner-container",children:[""!==P.h2&&(0,u.jsx)("div",{className:"banner-title",children:(0,u.jsx)("h2",{className:"banner-title-header",children:P[m].PRODUCT_NM})}),""!==_&&(0,u.jsxs)("div",{className:"banner-images ".concat("move"===k?k:""),ref:g,onClick:function(){R("/Products/\uc81c\ud488/\uc0c1\uc138\ud398\uc774\uc9c0",{state:{id:P[m].PRODUCT_PK,img:_[m]}})},children:[(0,u.jsx)("img",{className:"banner-images-index clone",src:_[2],alt:"\uc870\uba85 \uc0ac\uc9c4"}),(0,u.jsx)("img",{className:"banner-images-index",src:_[0],alt:"\uc870\uba85 \uc0ac\uc9c4"}),(0,u.jsx)("img",{className:"banner-images-index",src:_[1],alt:"\uc870\uba85 \uc0ac\uc9c4"}),(0,u.jsx)("img",{className:"banner-images-index",src:_[2],alt:"\uc870\uba85 \uc0ac\uc9c4"}),(0,u.jsx)("img",{className:"banner-images-index clone",src:_[0],alt:"\uc870\uba85 \uc0ac\uc9c4",ref:j})]}),(0,u.jsx)("span",{className:"banner-pre",onClick:E}),(0,u.jsx)("span",{className:"banner-next",onClick:E})]})]}),(0,u.jsxs)("div",{className:"banner-dot",children:[(0,u.jsx)("span",{id:"0",className:"banner-dot-index ".concat(0===m?"current":""),onClick:M}),(0,u.jsx)("span",{id:"1",className:"banner-dot-index ".concat(1===m?"current":""),onClick:M}),(0,u.jsx)("span",{id:"2",className:"banner-dot-index ".concat(2===m?"current":""),onClick:M})]})]})},o=t(433);var f=function(e){var n=(0,c.useState)(0),t=(0,a.Z)(n,2),l=t[0],f=t[1],m=(0,c.useRef)(null),d=(0,c.useRef)(null),h=(0,c.useState)(e.state.hash),x=(0,a.Z)(h,2),p=x[0],v=(x[1],(0,c.useState)("")),g=(0,a.Z)(v,2),j=g[0],b=g[1],N=(0,c.useState)(""),k=(0,a.Z)(N,2),T=k[0],C=k[1],Z=function(e){var n=e.target.className,t=m.current.children.length-5;f("article-pre"===n?0!==l?function(e){return e+1}:0:l!==-t?function(e){return e-1}:-t)};(0,c.useEffect)((function(){if(""!==T){var e=d.current.clientWidth+10;m.current.style.transform="translateX("+l*e+"px)"}}),[l]),(0,c.useEffect)((function(){""!==j&&j.map((function(n,t){n.HASHTAG.includes(e.state.title)&&C((function(e){return[].concat((0,o.Z)(e),[n])}))}))}),[j,e.state.title]),(0,c.useEffect)((function(){function e(){return(e=(0,r.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/main/hashtag",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(p)});case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:(t=e.sent).success?b(t.data):alert(t.msg),e.next=12;break;case 11:throw Error("\uc11c\ubc84 \uc751\ub2f5 \uc2e4\ud328");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(Error("\ubd88\ub7ec\uc624\ub294 \uc911 \uc5d0\ub7ec \ubc1c\uc0dd"));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p]);var P=(0,i.s0)();return(0,u.jsxs)("div",{className:"article",children:[(0,u.jsx)("h2",{className:"article-title",children:e.state.title}),(0,u.jsxs)("div",{className:"article-image",children:[(0,u.jsx)("span",{className:"article-pre",onClick:Z}),(0,u.jsx)("span",{className:"article-next",onClick:Z}),(0,u.jsx)("div",{className:"article-recommend",ref:m,children:""!==T&&T.map((function(e,n){return(0,u.jsx)("img",{className:"article-recommend-items",src:"data:image/jpeg;base64,".concat(e.IMG_DATA),alt:"\uc0c1\ud669\ubcc4 \uc870\uba85 \ucd94\ucc9c \uc0ac\uc9c4",ref:d,onClick:function(){return function(e){var n="data:image/jpeg;base64,".concat(e.IMG_DATA);P("/Products/\uc81c\ud488/\uc0c1\uc138\ud398\uc774\uc9c0",{state:{id:e.PRODUCT_PK,img:n}})}(e)}},n)}))})]})]})};var m=function(e){var n=(0,c.useState)(""),t=(0,a.Z)(n,2),s=(t[0],t[1]),r=(0,c.useState)({hashtag1:"\uc544\ub2f4",hashtag2:"\uc2dc\ud06c",hashtag3:"\ud32c\ub358\ud2b8"}),i=(0,a.Z)(r,2),o=i[0];return i[1],(0,c.useEffect)((function(){e&&s(e)}),[e]),(0,u.jsxs)("div",{className:"home",children:[(0,u.jsx)(l,{}),(0,u.jsxs)("section",{className:"home-article",children:[(0,u.jsx)(f,{state:{hash:o,title:o.hashtag1}}),(0,u.jsx)(f,{state:{hash:o,title:o.hashtag2}}),(0,u.jsx)(f,{state:{hash:o,title:o.hashtag3}})]})]})}}}]);
//# sourceMappingURL=104.c464b65c.chunk.js.map