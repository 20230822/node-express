"use strict";(self.webpackChunklight=self.webpackChunklight||[]).push([[498],{498:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=a(165),c=a(861),s=a(439),n=a(689),i=a(791),o=a(87),l=a(184);var u=function(e){var t=(0,i.useState)([{CARTEGORY_FK:"",IMG_DATA:"",PRICE:"",PRODUCT_PK:""}]),a=(0,s.Z)(t,2),n=a[0],u=a[1],d=(0,i.useState)([]),p=(0,s.Z)(d,2),f=p[0],h=p[1],g=e.path.replace(/\s/g,"");return(0,i.useEffect)((function(){u(e.data.products)}),[e]),(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n){e.next=5;break}return e.next=3,Promise.all(n.map((function(e){var t="data:image/jpeg;base64,".concat(e.IMG_DATA);return e.IMG_DATA=t,e})));case 3:t=e.sent,h(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),(0,l.jsx)("div",{className:"products-items",children:void 0!==f&&f.map((function(e,t){return(0,l.jsx)(o.rU,{className:"item-box",to:"/Products/".concat(g,"/\uc0c1\uc138\ud398\uc774\uc9c0"),state:{id:e.PRODUCT_PK,img:e.IMG_DATA},children:(0,l.jsx)("img",{className:"item-box-img",src:e.IMG_DATA,alt:"\uc870\uba85\uc0ac\uc9c4"})},t)}))})},d=[{address:"%ED%8E%9C%EB%8D%98%ED%8A%B8",lamp:"\ud39c\ub358\ud2b8"},{address:"%ED%94%8C%EB%A1%9C%EC%96%B4%EB%9E%A8%ED%94%84",lamp:"\ud50c\ub85c\uc5b4 \ub7a8\ud504"},{address:"%ED%85%8C%EC%9D%B4%EB%B8%94%EB%9E%A8%ED%94%84",lamp:"\ud14c\uc774\ube14 \ub7a8\ud504"},{address:"%EC%9B%94%EB%9E%A8%ED%94%84",lamp:"\uc6d4 \ub7a8\ud504"}];var p=function(){var e=(0,i.useState)(""),t=(0,s.Z)(e,2),a=t[0],o=t[1],p=(0,i.useState)(""),f=(0,s.Z)(p,2),h=f[0],g=f[1],m=(0,n.TH)().pathname,y=(0,i.useRef)(),v=(0,i.useState)({category:"",pageListSize:"",page:""}),E=(0,s.Z)(v,2),x=E[0],C=E[1],j=(0,i.useState)(""),N=(0,s.Z)(j,2),k=N[0],A=N[1],D=(0,i.useState)(!0),S=(0,s.Z)(D,2),Z=S[0],b=S[1];(0,i.useEffect)((function(){var e=m.substring(10),t=d.find((function(t){return t.address===e}));g(t?t.lamp:"")}),[h,m]),(0,i.useEffect)((function(){"\ud39c\ub358\ud2b8"===h?C({category:10,pageListSize:20,page:1}):"\ud50c\ub85c\uc5b4 \ub7a8\ud504"===h?C({category:20,pageListSize:20,page:1}):"\ud14c\uc774\ube14 \ub7a8\ud504"===h?C({category:30,pageListSize:20,page:1}):"\uc6d4 \ub7a8\ud504"===h&&C({category:40,pageListSize:20,page:1})}),[h]),(0,i.useEffect)((function(){o("")}),[h]);var T=function(e){var t=e.target.innerText;o(t),a===t&&o("");var r="";"\ud39c\ub358\ud2b8"===h?r=10:"\ud50c\ub85c\uc5b4 \ub7a8\ud504"===h?r=20:"\ud14c\uc774\ube14 \ub7a8\ud504"===h?r=30:"\uc6d4 \ub7a8\ud504"===h&&(r=40),"\uac04\uc811 \uc870\uba85"===t&&x.category!==r+1?x.category=r+1:x.category===r+1&&(x.category=r),"\ubc18\uac04\uc811 \uc870\uba85"===t&&x.category!==r+2?x.category=r+2:x.category===r+2&&(x.category=r),"\uc804\ubc18\ud655\uc0b0 \uc870\uba85"===t&&x.category!==r+3?x.category=r+3:x.category===r+3&&(x.category=r),"\ubc18\uc9c1\uc811 \uc870\uba85"===t&&x.category!==r+4?x.category=r+4:x.category===r+4&&(x.category=r),"\uc9c1\uc811 \uc870\uba85"===t&&x.category!==r+5?x.category=r+5:x.category===r+5&&(x.category=r),B()};function B(){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://port-0-node-express-jvvy2blmegkftc.sel5.cloudtype.app/api/product/category",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});case 3:if(!(t=e.sent).ok){e.next=11;break}return e.next=7,t.json();case 7:(a=e.sent).success?(b(!1),A(a.data)):alert(a.msg),e.next=13;break;case 11:throw b(!0),Error("\uc11c\ubc84 \uc751\ub2f5 \uc2e4\ud328");case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),b(!0),console.error(Error("\ubd88\ub7ec\uc624\ub294 \uc911 \uc5d0\ub7ec \ubc1c\uc0dd"));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){y.current.parentElement.firstChild.firstChild.firstChild.className="light ".concat(h),y.current.parentElement.firstChild.firstChild.firstChild.firstChild.className="light ".concat(a)}),[h,a]),(0,i.useEffect)((function(){x.category>=10&&B()}),[x]),(0,l.jsxs)("div",{className:"products",ref:y,children:[(0,l.jsx)("div",{className:"products-filter",children:(0,l.jsx)("div",{className:"filter-method",children:(0,l.jsxs)("ul",{className:"method",children:[(0,l.jsx)("li",{className:"method-each ".concat("\uac04\uc811 \uc870\uba85"===a?"active":""),onClick:T,children:"\uac04\uc811 \uc870\uba85"}),(0,l.jsx)("li",{className:"method-each ".concat("\ubc18\uac04\uc811 \uc870\uba85"===a?"active":""),onClick:T,children:"\ubc18\uac04\uc811 \uc870\uba85"}),(0,l.jsx)("li",{className:"method-each ".concat("\uc804\ubc18\ud655\uc0b0 \uc870\uba85"===a?"active":""),onClick:T,children:"\uc804\ubc18\ud655\uc0b0 \uc870\uba85"}),(0,l.jsx)("li",{className:"method-each ".concat("\ubc18\uc9c1\uc811 \uc870\uba85"===a?"active":""),onClick:T,children:"\ubc18\uc9c1\uc811 \uc870\uba85"}),(0,l.jsx)("li",{className:"method-each ".concat("\uc9c1\uc811 \uc870\uba85"===a?"active":""),onClick:T,children:"\uc9c1\uc811 \uc870\uba85"})]})})}),(0,l.jsxs)("div",{className:"products-root",children:[(0,l.jsx)("span",{className:"root parent",children:h}),""!==a?(0,l.jsx)("span",{className:"root arrow"}):"",""!==a?(0,l.jsx)("span",{className:"root",children:a}):""]}),!1===Z?(0,l.jsx)(u,{path:h,data:k}):(0,l.jsx)("div",{className:"products-loading",children:"loading..."})]})}}}]);
//# sourceMappingURL=498.3c9000ca.chunk.js.map